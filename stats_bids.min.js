const _MIN_PREF_=-1,_MAX_PREF_=3,_CONFLICT_=-100,_MIN_POS_PREFS_=30,_INPUT_SELECTOR_="input.revpref",_ROW_SELECTOR_="tr.pl";function stats(){var e=Array.from(document.querySelectorAll(_ROW_SELECTOR_)).map(e=>[e.dataset.pid,e.querySelector(_INPUT_SELECTOR_)]),r=Array.from(e).map(e=>e[1]),o=(console.log("[INFO] Found "+r.length+" papers"),Array.from(r).map(e=>parseInt(e.value)||0)),r=Array.from(r).filter(e=>!$(e).is(":visible")),r=(0<r.length&&console.log("[WARNING] YOU (chair/VC) have "+r.length+" conflicts. Remapping values may not be possible for all bids."),Array.from(o).filter(e=>e==_CONFLICT_)),r=(0<r.length?(console.log("[WARNING] Found "+r.length+" conflicts in prefs"),o=Array.from(o).filter(e=>e!=_CONFLICT_)):console.log("[INFO] No conflicts found"),Math.min(...o)),l=Math.max(...o),r=(r<_MIN_PREF_&&console.log("[WARNING] Out of range prefs. MIN pref: "+r+"]"),l>_MAX_PREF_&&console.log("[WARNING] Out of range prefs. MAX pref: "+l+"]"),r>=_MIN_PREF_&&l<=_MAX_PREF_&&console.log("[INFO] Prefs in range=["+r+", "+l+"]"),Array.from(o).filter(e=>0<e)),l=(console.log("[INFO] Preferences >  0 = "+r.length),r.length<_MIN_POS_PREFS_&&console.log("[WARNING] Insufficient positive preferences (<"+_MIN_POS_PREFS_),Array.from(o).filter(e=>e<0)),r=(console.log("[INFO] Preferences <  0 = "+l.length),Array.from(o).filter(e=>0==e)),l=(console.log("[INFO] Preferences == 0 = "+r.length),Array.from(e).reduce((e,r)=>(e[v=parseInt(r[1].value)||0]||(e[v]=[]),e[v].push(r[0]),e),{}));console.log("[INFO] Current bids"),Object.entries(l).forEach(e=>{console.log("   Key: ",e[0]," : ",e[1].join(", "))})}stats();
